package com.mycompany.P1Eva5LopezRayson_Mejorada;

import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class Doctor_LopezRayson extends Personal_LopezRayson {
    private String codigo;
    private double valorHoras;
    private int cantidadHoras;
    private double sueldo;
    private Scanner sc;
    private ArrayList<Paciente_LopezRayson> pacientes;
 
    public Doctor_LopezRayson(String names, String CI, String email, String codigo, double valorHoras,
            int cantidadHoras) {
        super(names, CI, email);
        this.codigo = codigo;
        this.valorHoras = valorHoras;
        this.cantidadHoras = cantidadHoras;
        this.pacientes = new ArrayList<>();
        this.sc = new Scanner(System.in);
    }

    public Doctor_LopezRayson() {
        this.pacientes = new ArrayList<>();
        this.sc = new Scanner(System.in);
    }
    
    public String getCodigo() {
		return codigo;
	}

	public void setCodigo(String codigo) {
		this.codigo = codigo;
	}

	public double getValorHoras() {
		return valorHoras;
	}

	public void setValorHoras(double valorHoras) {
		this.valorHoras = valorHoras;
	}

	public int getCantidadHoras() {
		return cantidadHoras;
	}

	public void setCantidadHoras(int cantidadHoras) {
		this.cantidadHoras = cantidadHoras;
	}

	public double getSueldo() {
		return sueldo;
	}

	public void setSueldo(double sueldo) {
		this.sueldo = sueldo;
	}

	public Scanner getSc() {
		return sc;
	}

	public void setSc(Scanner sc) {
		this.sc = sc;
	}

	public ArrayList<Paciente_LopezRayson> getPacientes() {
		return pacientes;
	}

	public void setPacientes(ArrayList<Paciente_LopezRayson> pacientes) {
		this.pacientes = pacientes;
	}

	@Override
    public void IngresarDatos() {
        System.out.println("Ingresa el codigo");
        while (true) {
            codigo = sc.nextLine();
            if (codigo.length() == 10 && codigo.matches("^\\d+$")) {
                break;
            } else {
                System.out.println("Error. Ingresa nuevamente un código de 10 dígitos numéricos.");
            }
        }

        System.out.println("Ingresa el valor por hora del doctor");
        while (true) {
            valorHoras = sc.nextDouble();
            sc.nextLine(); // consume newline
            if (valorHoras >= 0 && valorHoras <= 25000) {
                break;
            } else {
                System.out.println("Error. Ingresa un valor entre 0 y 25000.");
            }
        }

        System.out.println("Ingresa la cantidad de horas");
        while (true) {
            cantidadHoras = sc.nextInt();
            sc.nextLine(); // consume newline
            if (cantidadHoras >= 0 && cantidadHoras <= 500) {
                break;
            } else {
                System.out.println("Error. Ingresa una cantidad entre 0 y 500.");
            }
        }

        CalcularSalario();
    }

    public void CalcularSalario() {
        this.sueldo = cantidadHoras * valorHoras;
        System.out.println("El sueldo del doctor es: " + sueldo);
    }

    public void IngresarPacienteArray() {
        System.out.println("Ingresa los datos del paciente:");
        Paciente_LopezRayson paciente = new Paciente_LopezRayson();
        paciente.IngresarDatos(); 
        pacientes.add(paciente);
    }
    public void DatosPacienteAlCSV(List<Paciente_LopezRayson> pacientes) {
        try (BufferedWriter wr = new BufferedWriter(new FileWriter("datosPacientes.csv", true))) {
            for (Paciente_LopezRayson paciente : pacientes) {
                wr.write("Paciente: " + paciente.getNames() + ", Cedula: " + paciente.getCI() + ", Email: " + paciente.getEmail() + ", Diagnostico: " + paciente.getDiagnostico() + ", Doctor: " + paciente.getNombresDoctor());
                wr.newLine();
            }
            wr.flush();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    @Override
    public void MostrarDatos() {
        super.MostrarDatos();
        System.out.println("Codigo: " + codigo);
        System.out.println("Valor Hora: " + valorHoras);
        System.out.println("Cantidad de Horas: " + cantidadHoras);
        System.out.println("Sueldo: " + sueldo);
    }
}
